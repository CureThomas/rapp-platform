<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RAPP Platform Wiki: RAPP-Knowrob-wrapper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="RAPP_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RAPP Platform Wiki
   &#160;<span id="projectnumber">v0.5.5</span>
   </div>
   <div id="projectbrief">RAPP Platform is a collection of ROS nodes and back-end processes that aim to deliver ready-to-use generic services to robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_rapp-platform_8wiki_RAPP-Knowrob-wrapper.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RAPP-Knowrob-wrapper </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#Methodology</p>
<p>The RAPP Knowrob wrapper ROS node is needed to expose specific services to the other ROS nodes and RPSs (similarly to the MySQL wrapper concept). In our implementation, the pure KnowRob ontology was enhanced after the insertion of extra classes derived from the OpenAAL ontology, as well as others needed to implement the desired RApps.</p>
<p>The services of the RAPP Knowrob wrapper are detailed below.</p>
<p>#ROS Services Each service is analyzed below.</p>
<h2>Subclasses of</h2>
<p>This service was created in order to return the subclasses of a specific ontology class. Apart from the basic functionality, one can perform recursive search in the ontology and not just in the classes’ immediate lower level connections.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/subclasses_of</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The class whose subclasses we want</h1>
<p>string ontology_class </p>
<h1>True if the query is recursive</h1>
<h2>bool recursive </h2>
<h1>Container for the subclasses</h1>
<p>string[] results </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Superclasses of</h2>
<p>This service was created in order to return the superclasses of a specific ontology class. Apart from the basic functionality, one can perform recursive search in the ontology and not just in the classes’ immediate higher level connections.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/superclasses_of</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The class whose superclasses we want</h1>
<p>string ontology_class </p>
<h1>True if the query is recursive</h1>
<h2>bool recursive </h2>
<h1>Container for the superclasses</h1>
<p>string[] results </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Is sub-super-class of</h2>
<p>This service was created in order to investigate two classes’ semantic relations. Apart from the basic functionality, one can perform recursive search in the ontology and not just in the classes’ immediate higher or lower level connections.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/is_subsuperclass_of</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The parent class</h1>
<p>string parent_class </p>
<h1>The child class</h1>
<p>string child_class </p>
<h1>True if the query is recursive</h1>
<h2>bool recursive </h2>
<h1>True if the semantic condition applies</h1>
<p>bool result </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Create instance</h2>
<p>This service was created in order to create an instance related to a specific ontology class. One can also store a file and comments. This service is not public but it is employed from the RIC nodes. Ownership of the new instance is assigned to the provided user which is an instance of the class Person within the ontology. The assignment involves setting an ontology attribute. The username provided in the input is the username of the user in the MySQL database and not the name of the user’s instance in the ontology. The second is also stored within the MySQL database the service acquires it by querying the MySQL database (with the username as input) through the MySQL wrapper. In case no ontology instance name (alias) is defined a new one is created utilizing the Create ontology alias service described below and the Ontology and MySQL database are updated accordingly.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/create_instance</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The user to whom the instance belongs</h1>
<p>string username </p>
<h1>The instance’s ontology class</h1>
<p>string ontology_class </p>
<h1>A file url (if needed)</h1>
<p>string file_url </p>
<h1>Comments (if needed)</h1>
<h2>string comments </h2>
<h1>A unique id</h1>
<p>string instance_name </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Create ontology alias</h2>
<p>This service was created in order to create an alias for a user within the ontology. A user ontology alias is basically an instance of the class Person that exists within the ontology. The user’s ontology alias is stored within the MySQL database in the respective column of the table User. This service accepts the MySQL username of the user and performs a check by querying the MySQL database in order to identify if an ontology alias has already been defined. If that is the case it simply returns that ontology alias. If not, it creates the ontology alias instance within the ontology, stores this information in the MySQL database and finally it returns the newly created user ontology alias. In the case that a new ontology alias is created both the ontology and the MySQL need to be updated. The service ensures that either both are updated in tandem or in case one fails no modifications take place in the other. This is critical to preserving proper synchronization between the MySQL database and the ontology.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/create_ontology_alias</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The user to whom the instance belongs</h1>
<h2>string username </h2>
<h1>A unique id</h1>
<p>string ontology_alias </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>User instances of class</h2>
<p>This service allows an ML algorithm to retrieve user-specific information in order to compute and extract personalized data. This service is not exposed via a HOP service, but is employed internally by other RIC nodes. It returns all the ontology instances that are assigned to the ontology alias of the provided user. The ontology alias is acquired again by querying the MySQL database.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/user_instances_of_class</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The user whose instances must be returned</h1>
<p>string username </p>
<h1>The ontology class whose instances we desire</h1>
<h2>string ontology_class </h2>
<h1>The instances</h1>
<p>String[] results </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Load / Dump ontology</h2>
<p>Since the KnowRob ontology framework does not provide online storage functionality, the ontology (along with the new information) must be stored in predefined time slots. This way, if a system crash occurs, the stored data won’t be lost but can be retrieved using the Load ontology ROS service. Both of these services have a common representation.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/load_ontology</code> Service URL: <code>/rapp/rapp_knowrob_wrapper/dump_ontology</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The file intended for loading or dumping the ontology</h1>
<h2>string file_url </h2>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Create cognitive test</h2>
<p>This service creates a new cognitive exercise test in the ontology as an instance. This service is not exposed via a HOP service, but is employed internally by the RAPP Cognitive exercise system node. It accepts as input that parameters of the test which include its type, subtype, difficulty, variation and file path and returns the name of the ontology instance created.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/create_cognitve_tests</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The type of the test</h1>
<p>string test_type </p>
<h1>The sub type of the test</h1>
<p>string test_subtype </p>
<h1>The difficulty of the test</h1>
<p>int32 test_difficulty </p>
<h1>The variation id of the test</h1>
<p>int32 test_variation </p>
<h1>The file path where the test is located</h1>
<h2>string test_path </h2>
<h1>The created test name</h1>
<p>string test_name </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Return cognitive tests of type</h2>
<p>This service returns all cognitive tests of the given type that exist within the ontology. This service is not exposed via a HOP service, but is employed internally by the RAPP Cognitive exercise system node. It accepts as input the test type and returns the names of the tests and their parameters which include their subtypes, file paths, difficulties and variation ids.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/cognitive_tests_of_type</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The type of the tests to be returned</h1>
<h2>string test_type </h2>
<h1>The names of the tests</h1>
<p>string[] tests </p>
<h1>The subtype of the tests</h1>
<p>string[] subtype </p>
<h1>The file paths of the tests</h1>
<p>string[] file_paths </p>
<h1>The difficulty of the tests</h1>
<p>string[] difficulty </p>
<h1>The variation of the tests</h1>
<p>string[] variation </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Record user cognitive test performance</h2>
<p>This service records the user’s (patient’s) performance on a given test at a given time. Performance is measured as integer value in the 0-100 range. This service is not exposed via a HOP service, but is employed internally by the RAPP Cognitive exercise system node.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/record_user_cognitive_tests_performance</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The name of the test</h1>
<p>string test </p>
<h1>The type of the test</h1>
<p>string test_type </p>
<h1>The ontology alias of the patient who is taking the test</h1>
<p>string patient_ontology_alias </p>
<h1>The score the patient achieved in the test</h1>
<p>int32 score </p>
<h1>The timestamp at which the test was performed</h1>
<h2>int32 timestamp </h2>
<h1>The name of the cognitive test performance entry</h1>
<p>string cognitive_test_performance_entry </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Return user cognitive test performance</h2>
<p>This service returns all the tests of the requested type that a specific user (patient) has undertaken along with the scores achieved, the time at which they were performed and the difficulty and variation ids of the tests. This service is not exposed via a HOP service, but is employed internally by the RAPP Cognitive exercise system node.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/user_performance_cognitve_tests</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header </p>
<h1>The ontology alias of the patient</h1>
<p>string ontology_alias </p>
<h1>The type of the tests of interest</h1>
<h2>string test_type </h2>
<h1>The names of the tests</h1>
<p>string[] tests </p>
<h1>The scores of the tests</h1>
<p>string[] scores </p>
<h1>The difficulty of the tests</h1>
<p>string[] difficulty </p>
<h1>The variation ids of the tests</h1>
<p>string[] variation </p>
<h1>The timestamps at which the tests were performed</h1>
<p>string[] timestamps </p>
<h1>Possible error</h1>
<p>string error </p>
<h1>true if successful</h1>
<p>bool success ```</p>
<h2>Register image object to ontology</h2>
<p>This service will register an image, annotated by the rapp_caffe_wrapper to the ontology.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/register_image_object_to_ontology</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header #the user's ontology alias string user_ontology_alias #the ontology class of the to be registered object string object_ontology_class #the caffe class of the to be registered object string caffe_class #the path to the image representing the object string image_path #timestamp of the time of registration </p>
<h2>int32 timestamp </h2>
<h1>The results of the query</h1>
<p>#the name of the registered object entry string object_entry #possible error string error #trace information string[] trace #true if service call was successful bool success ```</p>
<h2>Retract user ontology alias</h2>
<p>This service will remove the ontology alias of a user from the ontology.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/retract_user_ontology_alias</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header #the user ontology alias to be retracted </p>
<h2>string ontology_alias </h2>
<h1>The results of the query</h1>
<p>#possible error string error #trace information string[] trace #true if service call was successful bool success ```</p>
<h2>Clear user cognitive test performance records</h2>
<p>This service will remove all cognitive test performance records of a user from the ontology.</p>
<p>Service URL: <code>/rapp/rapp_knowrob_wrapper/clear_user_cognitive_tests_performance_records</code></p>
<p>Service type: ```bash </p>
<h1>Contains info about time and reference</h1>
<p>Header header #the username of the user whose records will be cleared string username #specify clearing the records of this test type onle </p>
<h2>string test_type </h2>
<h1>The results of the query</h1>
<p>#possible error string error #trace information string[] trace #true if service call was successful bool success ```</p>
<p>#Launchers</p>
<h2>Standard launcher</h2>
<p>Launches the <b>rapp_knowrob_wrapper</b> node and can be launched using ``` roslaunch rapp_knowrob_wrapper knowrob_wrapper.launch ```</p>
<p>#HOP services</p>
<h2>Ontology-SubClasses-Of</h2>
<h3>Service-Url</h3>
<p>``` /hop/ontology_subclasses_of ```</p>
<h3>Service request arguments</h3>
<p>```js { query: '' } ```</p>
<ul>
<li><b>query</b> (String): The query to the ontology database.</li>
</ul>
<h3>Service response</h3>
<p>application/json response.</p>
<p>```javascript { results: [], error: '' } ```</p>
<ul>
<li><b>results</b> (Array): Query results.</li>
<li><b>error</b> (String): Error message, if one occures.</li>
</ul>
<p>```javascript { results: [ '<a href="http://knowrob.org/kb/knowrob.owl#Oven',">http://knowrob.org/kb/knowrob.owl#Oven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#MicrowaveOven',">http://knowrob.org/kb/knowrob.owl#MicrowaveOven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#RegularOven',">http://knowrob.org/kb/knowrob.owl#RegularOven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#ToasterOven'">http://knowrob.org/kb/knowrob.owl#ToasterOven'</a>], error: '' } ```</p>
<h2>Ontology-SuperClasses-Of</h2>
<h3>Service-Url</h3>
<p>``` /hop/ontology_superclasses_of ```</p>
<h3>Service request arguments</h3>
<p>```js { query: '' } ```</p>
<ul>
<li><b>query</b> (String): The query to the ontology database.</li>
</ul>
<h3>Service response</h3>
<p>application/json response.</p>
<p>```javascript { results: [], error: '' } ```</p>
<ul>
<li><b>results</b> (Array): Query results returned from ontology database.</li>
<li><b>error</b> (String): Error message, if one occures.</li>
</ul>
<h2>Ontology-Is-SubSuperClass-Of</h2>
<h3>Service-Url</h3>
<p>``` /hop/ontology_is_subsuperclass_of ```</p>
<h3>Service request arguments</h3>
<p>```js { parent_class: '', child_class: '', recursive: false } ```</p>
<ul>
<li><b>parent_class</b> (String): The parent class name.</li>
<li><b>child_class</b> (String) The child class name.</li>
<li><b>recursive</b> (Boolean): Defines if a recursive procedure will be used (true/false).</li>
</ul>
<h3>Service response</h3>
<p>application/json response.</p>
<p>```javascript { result: true, error: '' } ```</p>
<ul>
<li><b>result</b> (Boolena): Success index on ontology-is-subsuperclass-of query.</li>
<li><b>error</b> (String): Error message, if one occures. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jul 1 2016 18:18:55 for RAPP Platform Wiki by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
