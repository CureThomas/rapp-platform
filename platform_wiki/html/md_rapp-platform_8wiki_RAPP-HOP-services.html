<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RAPP Platform Wiki: RAPP-HOP-services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="RAPP_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">RAPP Platform Wiki
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_rapp-platform_8wiki_RAPP-HOP-services.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RAPP-HOP-services </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>RAPP Platform Web Services</b> are developed under the <a href="https://github.com/manuel-serrano/hop">HOP web broker</a>. These services are used in order to communicate with the RAPP Platform ecosystem and access RIC(RAPP Improvement Center) AI modules.</p>
<table class="doxtable">
<tr>
<th align="center">Platform Services </th><th align="center">Description  </th></tr>
<tr>
<td align="center">face_detection </td><td align="center">Performs face detection on given input image frame </td></tr>
<tr>
<td align="center">qr_detection </td><td align="center">Performs face detection on given input image frame </td></tr>
<tr>
<td align="center">text_to_speech </td><td align="center">Performs text-to-speech on given input plain text </td></tr>
<tr>
<td align="center">denoise_profile </td><td align="center">Used in order to perform given user's audio profile </td></tr>
<tr>
<td align="center">speech_detection_sphix4 </td><td align="center">Performs speech-detection using the Platform integrated Sphinx4 engine </td></tr>
<tr>
<td align="center">speech_detection_google </td><td align="center">Performs speech-detection using the Platform integrated Google engine </td></tr>
<tr>
<td align="center">available_services </td><td align="center">Returns a list of the Platform available services (up-to-date) </td></tr>
<tr>
<td align="center">ontology_subclasses_of </td><td align="center">Perform Ontology, subclasses-of, query </td></tr>
<tr>
<td align="center">ontology_superclasses_of </td><td align="center">Perform Ontology, superclasses-of, query </td></tr>
<tr>
<td align="center">ontology_is_supsuperclass_of </td><td align="center">Perform Ontology, is-subsuperclass-of, query </td></tr>
<tr>
<td align="center">cognitive_test_chooser </td><td align="center">Returns a Cognitive Exercise literal that describes the test </td></tr>
<tr>
<td align="center">record_cognitive_test_performance </td><td align="center">Record user's performance on given Cognitive Exercise </td></tr>
</table>
<h2>Services</h2>
<h4>QR-Detection</h4>
<p>```javascript qr_detection ( {file_uri: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>file_uri: Destination where the posted file data (<b>image file</b>) are saved by hop-server. Data are posted using a multipart/form-data post request using this field. e.g.</li>
</ul>
<p>```python file = {'file_uri': open(&lt;to-send-file-path&gt;, 'rb')} ```</p>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { qr_centers: [], qr_messages: [], error: '' } ```</p>
<ul>
<li>qr_centers: Vector that containes points (x,y) of found QR in an image frame.</li>
<li>qr_messages: Vector that containes message descriptions of found QR in an image frame.</li>
<li>error: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<p>Response Sample:</p>
<p>```javascript { qr_centers: [ { y: 165, x: 165 } ], qr_messages: ['rapp project qr sample'], error: '' } ```</p>
<h4>Face-Detection</h4>
<p>```javascript face_detection ( {file_uri: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>file_uri: Destination where the posted file data (<b>image file</b>) are saved by hop-server. Data are posted using a multipart/form-data post request using this field. e.g.</li>
</ul>
<p>```python file = {'file_uri': open(&lt;to-send-file-path&gt;, 'rb')} ```</p>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { faces: [{ up_left_point: {}, down_right_point: {} }], error: '' } ```</p>
<p>Point coordinates are presented in Cartesian Coordinate System as:</p>
<p>```javascript {x: &lt;value_int&gt;, y: &lt;value_int&gt;} ```</p>
<ul>
<li>faces: Dynamic vector that contains recognized faces in an image frame.</li>
<li>up_left_point: This Object literal contains the up-left point coordinates of detected face.</li>
<li>up_left_point: This Object literal contains the down-right point coordinates of detected face.</li>
<li>error: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<p>Response Sample:</p>
<p>```javascript { faces: [{ up_left_point: { y: 200, x: 212 }, down_right_point: { y: 379, x: 391 } }], error: '' } ```</p>
<h2>### Speech Detection related services. </h2>
<h4>Denoise Audio Profile</h4>
<p>```javascript set_denoise_profile ( {file_uri: '', audio_source: '', user: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'file_uri'**: Destination where the posted file data (<b>audio data file</b>) are saved by hop-server. Data are posted using a multipart/form-data post request using this field. e.g.</li>
</ul>
<p>```python file = {'file_uri': open(&lt;to-send-file-path&gt;, 'rb')} ```</p>
<ul>
<li>**'audio_source'**: A value that presents the &lt;robot&gt;_&lt;encode&gt;_&lt;channels&gt; information for the audio source data. e.g "nao_wav_1_ch".</li>
<li>**'user'**: Userâ€™s name. Used for per-user profile denoise configurations.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>error: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<p>```javascript { error:"RAPP Platform Failure!" } ```</p>
<h4>Speech-Detection-Sphinx4</h4>
<p>```javascript speech_detection_sphinx4 ( { file_uri: '', language: '', audio_source: '', words: [], sentences: [], grammar: [], user: ''}) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'file_uri'**: Destination where the posted file data (<b>audio data file</b>) are saved by hop-server. Data are posted using a multipart/form-data post request using this field. e.g.</li>
</ul>
<p>```python file = {'file_uri': open(&lt;to-send-file-path&gt;, 'rb')} ```</p>
<ul>
<li>**'language'**: Language to be used by the speech_detection_sphinx4 module. Currently valid language values are â€˜grâ€™ for Greek and â€˜enâ€™ for English.</li>
<li>**'audio_source'**: A value that presents the &lt;robot&gt;_&lt;encode&gt;_&lt;channels&gt; information for the audio source data. e.g "nao_wav_1_ch".</li>
<li>**'words[]'**: A vector that carries the words to search for into the voice-audio-source.</li>
<li>**'sentences[]'**: The under consideration sentences.</li>
<li>**'grammar[]'**: Grammars to use in speech recognition.</li>
<li>**'user'**: Userâ€™s name. Used for per-user profile denoise configurations.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { words: [], error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>**'error'**: If error was encountered, an error message is pushed in this field and returned to the client.</li>
<li>**'words[]'**: A vector that contains the "words-found"</li>
</ul>
<h4>Speech-Detection-Google</h4>
<p>```javascript speech_detection_sphinx4 ( { file_uri: '', audio_source: '', user: '', language: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'file_uri'**: Destination where the posted file data (<b>audio data file</b>) are saved by hop-server. Data are posted using a multipart/form-data post request using this field. e.g.</li>
</ul>
<p>```python file = {'file_uri': open(&lt;to-send-file-path&gt;, 'rb')} ```</p>
<ul>
<li>**'language'**: Language to be used by the speech_detection_sphinx4 module. Currently valid language values are â€˜grâ€™ for Greek and â€˜enâ€™ for English.</li>
<li>**'audio_source'**: A value that presents the {robot}_{encode}_{channels} information for the audio source data. e.g "nao_wav_1_ch".</li>
<li>**'user'**: Userâ€™s name. Used for per-user profile denoise configurations.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { words: [], alternatives: [] error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>**'error'**: If error was encountered, an error message is pushed in this field and returned to the client.</li>
<li>**'words[]'**: A vector that contains the "words-found" with highest confidence.</li>
<li>**'alternatives[[]]'**: Alternative sentences. e.g. [['send', 'mail'], ['send', 'email'], ['set', 'mail']...]</li>
</ul>
<h2>### Ontology related services. </h2>
<p>The following Platform services give access to the Platform integrated Ontology system.</p>
<h4>Ontology-SubClasses-Of</h4>
<p>```javascript ontology_subclasses_of ( { query: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'query'**: The query to the ontology database.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { results: [], error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>**'results'**: Query results returned from ontology database.</li>
<li>**'error'**: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<p>```javascript { results: [ '<a href="http://knowrob.org/kb/knowrob.owl#Oven',">http://knowrob.org/kb/knowrob.owl#Oven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#MicrowaveOven',">http://knowrob.org/kb/knowrob.owl#MicrowaveOven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#RegularOven',">http://knowrob.org/kb/knowrob.owl#RegularOven',</a> '<a href="http://knowrob.org/kb/knowrob.owl#ToasterOven'">http://knowrob.org/kb/knowrob.owl#ToasterOven'</a>], error: '' } ```</p>
<h4>Ontology-SuperClasses-Of</h4>
<p>```javascript ontology_superclasses_of ( { query: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'query'**: The query to the ontology database.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { results: [], error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>**'results'**: Query results returned from ontology database.</li>
<li>**'error'**: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<h4>Ontology-Is-SubSuperClass-Of</h4>
<p>```javascript ontology_is_subsuperclass_of ( { parent_class: '', child_class: '', recursive: false } ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'parent_class'**: The parent class name.</li>
<li>**'child_class'**: The child class name.</li>
<li>**'recursive'**: Defines if a recursive procedure will be used (true/false).</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { results: Bool, error: '&lt;error_message&gt;' } ```</p>
<ul>
<li>**'result'**: Success index on ontology-is-subsupeclass-of query</li>
<li>**'error'**: If error was encountered, an error message is pushed in this field and returned to the client.</li>
</ul>
<h2>### Text-To-Speech (tts) related services </h2>
<h4>Text-To-Speech</h4>
<p>```javascript text_to_speech( { text: '', language: ''} ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'text'**: Input text to translate to audio data.</li>
<li>**'language'**: Language to be used for the TTS module. Valid values are currently <b>el</b> and <b>en</b></li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { payload: &lt;audio_data&gt;, basename: &lt;audio_file_basename&gt;, encoding: &lt;payload_encoding&gt;, error: &lt;error_message&gt; } ```</p>
<ul>
<li>**'payload'**: The audio data payload. Payload encoding is defined by the 'encoding' json field. Decode the payload audio data (client-side) using the codec value from the 'encoding' field.</li>
<li>**'encoding**: Codec used to encode the audio data payload. Currently encoding of binary data is done using base64 codec. Ignore this field. May be used in future implementations.</li>
<li>**'basename'**: A static basename for the audio data file, returned by the platform service. Ignore this field. May be usefull in future implementations.</li>
<li>**'error'**: If error was encountered, an error message is pushed in this field.</li>
</ul>
<h2>### Cognitive Exercises related services </h2>
<h4>Cognitive-Test-Selector</h4>
<p>```javascript cognitive_test_chooser( { user: '', test_type: '' } ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'user'**: Username of client used to retrieve information from database. e.g "klpanagi"</li>
<li>**'test_type'**: Cognitive Exercise test type. Can be one of ['ArithmeticCts', 'AwarenessCts', 'ReasoningCts']</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { questions: [], possib_ans: [], correct_ans: [], test_instance: '', test_type: '', test_subtype: '', error: '' } ```</p>
<ul>
<li>**'questions'**: The exercise set of questions.</li>
<li>**'possib_ans'**: The set of answers for each question. vector&lt;vector&lt;string&gt;&gt;</li>
<li>**'correct_ans'**: The set of correct answers for each question. vector&lt;string&gt;</li>
<li>**'test_instance'**: Returned test name. For example, 'ArithmeticCts_askw0Snwk'</li>
<li>**'test_type'**: Cognitive exercise class/type. Documentation on Cognitive Exercise classes can be found <a href="https://github.com/rapp-project/rapp-platform/tree/CognitiveSystem/rapp_cognitive_exercise">here</a></li>
<li>**'test_subtype'**: Cognitive exercise sub-type. Documentation on Subtypes can be found <a href="https://github.com/rapp-project/rapp-platform/tree/CognitiveSystem/rapp_cognitive_exercise">here</a></li>
<li>**'error'**: If error was encountered, an error message is pushed in this field.</li>
</ul>
<h4>Cognitive-Test-Selector</h4>
<p>```javascript record_cognitive_test_performance( { user: '', test_instance: '', score: 0 } ) ```</p>
<h5>Input parameters</h5>
<ul>
<li>**'user'**: Username of client used to retrieve information from database. e.g "klpanagi"</li>
<li>**'test_instance'**: Cognitive Exercise test instance. The full cognitive test entry name as reported by the <b>cognitive_test_chooser()</b>.</li>
<li>**'score'**: User's performance score on given test entry.</li>
</ul>
<h5>Response/Return-Data</h5>
<p>The returned data are in <em>JSON</em> representation. A JSON.load() from client side must follow in order to decode the received data.</p>
<p>```javascript { performance_entry: '', error: '' } ```</p>
<ul>
<li>**'performace_entry'**: User's cognitive test performance entry in ontology.</li>
<li>**'error'**: If error was encountered, an error message is pushed in this field.</li>
</ul>
<h2>### Health - RAPP Platform Status </h2>
<p>For RAPP developers.</p>
<h4>Rapp-Platform-Status</h4>
<p>```javascript rapp_platform_status() ```</p>
<p>Invoke this service from your favourite web browser:</p>
<p>```javascript &lt;rapp_platform_pub_ipaddr&gt;/9001/hop/rapp_platform_status ``` </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Dec 2 2015 13:19:24 for RAPP Platform Wiki by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
